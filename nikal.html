<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>‡§∏‡•ç‡§™‡§∞‡•ç‡§ß‡§æ‡§Ç‡§ö‡•á ‡§®‡§ø‡§ï‡§æ‡§≤ ‚Äì ‡•®‡•¶‡•®‡•¨</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --primary:#1e40af;
  --bg:#f1f5f9;
  --card:#ffffff;
  --text:#1f2937;
  --success:#16a34a;
}

*{box-sizing:border-box;}

body{
  margin:0;
  padding:16px;
  background:var(--bg);
  color:var(--text);
  font-family:"Noto Sans Devanagari","Mukta",system-ui,sans-serif;
}

.container{max-width:900px;margin:auto;}

.header{
  background:var(--primary);
  color:#fff;
  padding:22px;
  border-radius:14px;
  text-align:center;
}

.header h1{margin:0;font-size:24px;font-weight:800;}
.header p{margin-top:6px;font-size:16px;font-weight:600;}

.card{
  background:var(--card);
  margin-top:22px;
  padding:22px;
  border-radius:14px;
  box-shadow:0 8px 20px rgba(0,0,0,0.12);
}

h2{
  margin-top:0;
  color:var(--primary);
  font-size:18px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:14px;
  margin-top:14px;
}

button{
  padding:14px;
  border:none;
  border-radius:10px;
  background:var(--primary);
  color:#fff;
  font-size:15px;
  font-weight:700;
  cursor:pointer;
}

button.secondary{
  background:#334155;
}

.hidden{display:none;}

.result-card{
  background:#ecfdf5;
  border-left:6px solid var(--success);
  padding:16px;
  border-radius:10px;
  margin-bottom:14px;
}

.rank{
  font-size:20px;
  font-weight:800;
}

.office{
  margin-top:6px;
  font-weight:600;
  color:#065f46;
}
  .back-btn{
  position:fixed;
  top:16px;
  left:16px;
  z-index:999;
  background:#1e40af;
  color:#ffffff;
  padding:10px 16px;
  border-radius:10px;
  font-weight:700;
  text-decoration:none;
  box-shadow:0 6px 14px rgba(0,0,0,0.25);
}
.back-btn:hover{
  background:#1d4ed8;
}
</style>
</head>

<body>
  <a href="dashboard.html" class="back-btn">‚¨ÖÔ∏è ‡§°‡•Ö‡§∂‡§¨‡•ã‡§∞‡•ç‡§°‡§µ‡§∞ ‡§™‡§∞‡§§ ‡§ú‡§æ</a>
<div class="container">

<!-- ================= HEADER ================= -->
<div class="header">
  <h1>üèÜ ‡§∏‡•ç‡§™‡§∞‡•ç‡§ß‡§æ‡§Ç‡§ö‡•á ‡§®‡§ø‡§ï‡§æ‡§≤ ‚Äì ‡•®‡•¶‡•®‡•¨</h1>
  <p>‡§Ø‡§æ‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡•Ä ‡§Æ‡§Ç‡§°‡§≥ ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§ï‡•ç‡§∞‡•Ä‡§°‡§æ ‡§µ ‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ</p>
</div>

<!-- ================= STEP 1 ================= -->
<div class="card" id="step1">
  <h2>‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§®‡§ø‡§µ‡§°‡§æ</h2>
  <div class="grid">
    <button onclick="selectMain('sports')">‡§ï‡•ç‡§∞‡•Ä‡§°‡§æ</button>
    <button onclick="selectMain('cultural')">‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï</button>
  </div>
</div>

<!-- ================= STEP 2 ================= -->
<div class="card hidden" id="step2">
  <h2>‡§∏‡§π‡§≠‡§æ‡§ó ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§®‡§ø‡§µ‡§°‡§æ</h2>
  <div class="grid">
    <button onclick="selectType('individual')">‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï</button>
    <button onclick="selectType('duheri')">‡§¶‡•Å‡§π‡•á‡§∞‡•Ä</button>
    <button onclick="selectType('team')">‡§∏‡§æ‡§Ç‡§ò‡§ø‡§ï</button>
  </div>
</div>

<!-- ================= STEP 3 ================= -->
<div class="card hidden" id="step3">
  <h2>‡§ñ‡•á‡§≥ / ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§®‡§ø‡§µ‡§°‡§æ</h2>
  <div id="programList" class="grid"></div>
</div>

<!-- ================= STEP 4 ================= -->
<div class="card hidden" id="step4">
  <h2>‡§®‡§ø‡§ï‡§æ‡§≤</h2>
  <div id="resultBox"></div>
</div>

</div>

<script>
// ================= CONFIG =================
const API = "https://script.google.com/macros/s/AKfycby4jBFfFt6GSBlQj_Cs22HrFA-0oXMZNQd0tBHA7h_FHYR2FLqR4UFaiCAfruYJQd9-NA/exec";

// ================= STATE =================
let mainType = "";
let partType = "";

// ================= STEP 1 =================
function selectMain(m){
  mainType = m;
  partType = "";

  document.getElementById("step2").classList.remove("hidden");
  document.getElementById("step3").classList.add("hidden");
  document.getElementById("step4").classList.add("hidden");

  document.getElementById("programList").innerHTML = "";
  document.getElementById("resultBox").innerHTML = "";
}


// ================= STEP 2 =================
function selectType(t){
  partType = t;
  loadPrograms();
}

// ================= STEP 3 =================
async function loadPrograms(){
  document.getElementById("step3").classList.remove("hidden");
  document.getElementById("step4").classList.add("hidden");

  const res = await fetch(
    `${API}?action=programs&main=${mainType}&type=${partType}`
  );
  const list = await res.json();

  const box = document.getElementById("programList");
  box.innerHTML = "";

  if(!list.length){
    box.innerHTML = "<p>‚ùå ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§æ‡§π‡•Ä‡§§.</p>";
    return;
  }

  list.forEach(p=>{
    const btn = document.createElement("button");
    btn.className = "secondary";
    btn.textContent = p;
    btn.onclick = ()=>loadResult(p);
    box.appendChild(btn);
  });
}

// ================= STEP 4 =================
async function loadResult(program){
  document.getElementById("step4").classList.remove("hidden");

  const res = await fetch(
    `${API}?action=result&main=${mainType}&type=${partType}&program=${encodeURIComponent(program)}`
  );
  const data = await res.json();

  const box = document.getElementById("resultBox");
  box.innerHTML = "";

  if(!data.length){
    box.innerHTML = "<p>‚ùå ‡§®‡§ø‡§ï‡§æ‡§≤ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§æ‡§π‡•Ä.</p>";
    return;
  }

  data.forEach(r=>{
    const names = (r.name || "")
      .split("/")
      .map(n=>n.trim())
      .join("<br>");

    box.innerHTML += `
      <div class="result-card">
        <div class="rank">üèÖ ${r.position}</div>
        <div>${names}</div>
        <div class="office">${r.office}</div>
      </div>
    `;
  });
}
</script>
</body>
</html>
