<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>‡§ï‡•ç‡§∞‡•Ä‡§°‡§æ ‡§∏‡•ç‡§™‡§∞‡•ç‡§ß‡§æ / ‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§®‡§ø‡§ï‡§æ‡§≤ ‚Äì ‡•®‡•¶‡•®‡•¨</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --primary:#1e40af;
  --bg:#f1f5f9;
  --card:#ffffff;
  --text:#1f2937;
  --success:#16a34a;
  --danger:#dc2626;
}

*{box-sizing:border-box;}

body{
  margin:0;
  padding:16px;
  padding-bottom:90px;
  background:var(--bg);
  color:var(--text);
  font-family:"Noto Sans Devanagari","Mukta",system-ui,sans-serif;
}

.container{max-width:900px;margin:auto;}

header{
  background:var(--primary);
  color:#fff;
  padding:22px;
  border-radius:14px;
  text-align:center;
}

header h1{margin:0;font-size:24px;font-weight:800;}
header p{margin-top:6px;font-size:16px;font-weight:600;}

.card{
  background:var(--card);
  margin-top:22px;
  padding:22px;
  border-radius:14px;
  box-shadow:0 8px 20px rgba(0,0,0,0.12);
}

h2{margin-top:0;color:var(--primary);font-size:18px;}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:14px;
  margin-top:14px;
}

button{
  padding:14px;
  border:none;
  border-radius:10px;
  background:var(--primary);
  color:#fff;
  font-size:15px;
  font-weight:700;
  cursor:pointer;
}

button.secondary{background:#334155;}

.hidden{display:none;}

.result-card{
  background:#ecfdf5;
  border-left:6px solid var(--success);
  padding:16px;
  border-radius:10px;
  margin-bottom:14px;
}

.rank{font-size:20px;font-weight:800;}

.office{
  margin-top:6px;
  font-weight:600;
  color:#065f46;
}

.error{
  font-weight:700;
  color:var(--danger);
  margin-top:10px;
}

/* Back button */
.back-btn{
  position:fixed;
  bottom:16px;
  left:50%;
  transform:translateX(-50%);
  background:#1e40af;
  color:#fff;
  padding:12px 22px;
  border-radius:14px;
  font-weight:700;
  text-decoration:none;
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
  z-index:999;
}

/* ================= MEGA CELEBRATION ================= */
.celebration{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  z-index:9999;
  overflow:hidden;
}

.celebration.hidden{display:none;}

.celebrate-text{
  position:absolute;
  top:40%;
  left:50%;
  transform:translate(-50%,-50%);
  z-index:20;
  color:#fff;
  font-size:32px;
  font-weight:900;
  text-align:center;
  animation:pop 0.6s ease;
}


/* Burst zones */
.burst{
  position:absolute;
  inset:0;
  pointer-events:none;
}

/* Confetti */
.confetti{
  position:absolute;
  width:8px;
  height:18px;
  opacity:0.95;
  animation-timing-function:ease-out;
  animation-fill-mode:forwards;
}

/* Colors */
.confetti:nth-child(5n){background:#facc15;}
.confetti:nth-child(5n+1){background:#22c55e;}
.confetti:nth-child(5n+2){background:#38bdf8;}
.confetti:nth-child(5n+3){background:#fb7185;}
.confetti:nth-child(5n+4){background:#a78bfa;}

/* Animations */
@keyframes blastLeft{
  from{transform:translate(0,0) rotate(0);opacity:1;}
  to{transform:translate(-600px,-800px) rotate(1440deg);opacity:0;}
}
@keyframes blastRight{
  from{transform:translate(0,0) rotate(0);opacity:1;}
  to{transform:translate(600px,-800px) rotate(-1440deg);opacity:0;}
}
@keyframes blastTop{
  from{transform:translate(0,0) rotate(0);opacity:1;}
  to{transform:translate(0,900px) rotate(1440deg);opacity:0;}
}

/* Random spread */
.confetti:nth-child(odd){width:6px;height:14px;}
.confetti:nth-child(even){width:10px;height:20px;}

@keyframes pop{
  from{transform:scale(0.5);opacity:0;}
  to{transform:scale(1);opacity:1;}
}
</style>
</head>

<body>

<!-- üéâ Celebration Overlay -->
<div id="celebration" class="celebration hidden">

  <!-- LEFT BLAST -->
  <div class="burst" id="leftBurst"></div>

  <!-- RIGHT BLAST -->
  <div class="burst" id="rightBurst"></div>

  <!-- TOP FALL -->
  <div class="burst" id="topBurst"></div>

  <div class="celebrate-text">
    üéâ ‡§Ö‡§≠‡§ø‡§®‡§Ç‡§¶‡§® üéâ<br>‡§®‡§ø‡§ï‡§æ‡§≤ ‡§ú‡§æ‡§π‡•Ä‡§∞!
  </div>

</div>

<a href="dashboard.html" class="back-btn">‚¨ÖÔ∏è ‡§°‡•Ö‡§∂‡§¨‡•ã‡§∞‡•ç‡§°‡§µ‡§∞ ‡§™‡§∞‡§§ ‡§ú‡§æ</a>

<div class="container">

<header>
  <h1>üèÜ ‡§ï‡•ç‡§∞‡•Ä‡§°‡§æ ‡§∏‡•ç‡§™‡§∞‡•ç‡§ß‡§æ / ‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§®‡§ø‡§ï‡§æ‡§≤ ‚Äì ‡•®‡•¶‡•®‡•¨</h1>
  <p>‡§Ø‡§æ‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡•Ä ‡§Æ‡§Ç‡§°‡§≥ ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§ï‡•ç‡§∞‡•Ä‡§°‡§æ ‡§µ ‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ</p>
</header>

<div class="card" id="step1">
  <h2>‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§®‡§ø‡§µ‡§°‡§æ</h2>
  <div class="grid">
    <button onclick="selectMain('sports')">‡§ï‡•ç‡§∞‡•Ä‡§°‡§æ</button>
    <button onclick="selectMain('cultural')">‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï</button>
  </div>
</div>

<div class="card hidden" id="step2">
  <h2>‡§∏‡§π‡§≠‡§æ‡§ó ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§®‡§ø‡§µ‡§°‡§æ</h2>
  <div class="grid">
    <button onclick="selectType('individual')">‡§µ‡•à‡§Ø‡§ï‡•ç‡§§‡§ø‡§ï</button>
    <button onclick="selectType('duheri')">‡§¶‡•Å‡§π‡•á‡§∞‡•Ä</button>
    <button onclick="selectType('team')">‡§∏‡§æ‡§Ç‡§ò‡§ø‡§ï</button>
  </div>
</div>

<div class="card hidden" id="step3">
  <h2>‡§ñ‡•á‡§≥ / ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§®‡§ø‡§µ‡§°‡§æ</h2>
  <div id="programList" class="grid"></div>
</div>

<div class="card hidden" id="step4">
  <h2>‡§®‡§ø‡§ï‡§æ‡§≤</h2>
  <div id="resultBox"></div>
</div>

</div>

<script>
const API="https://script.google.com/macros/s/AKfycby4jBFfFt6GSBlQj_Cs22HrFA-0oXMZNQd0tBHA7h_FHYR2FLqR4UFaiCAfruYJQd9-NA/exec";

let mainType="", partType="";
let celebrating=false;

function selectMain(m){
  mainType=m;
  partType="";
  step2.classList.remove("hidden");
  step3.classList.add("hidden");
  step4.classList.add("hidden");
  programList.innerHTML="";
  resultBox.innerHTML="";
}

function selectType(t){
  partType=t;
  step4.classList.add("hidden");
  resultBox.innerHTML="";
  loadPrograms();
}

async function loadPrograms(){
  step3.classList.remove("hidden");
  programList.innerHTML="‡§≤‡•ã‡§° ‡§π‡•ã‡§§ ‡§Ü‡§π‡•á...";
  try{
    const res=await fetch(`${API}?action=programs&main=${mainType}&type=${partType}`);
    const list=await res.json();
    programList.innerHTML="";
    list.forEach(p=>{
      const b=document.createElement("button");
      b.className="secondary";
      b.textContent=p;
      b.onclick=()=>loadResult(p);
      programList.appendChild(b);
    });
  }catch{
    programList.innerHTML="<div class='error'>‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§§‡§æ ‡§Ü‡§≤‡§æ ‡§®‡§æ‡§π‡•Ä</div>";
  }
}

function medal(pos){
  if(pos==1) return "ü•á ‡§™‡•ç‡§∞‡§•‡§Æ";
  if(pos==2) return "ü•à ‡§¶‡•ç‡§µ‡§ø‡§§‡•Ä‡§Ø";
  if(pos==3) return "ü•â ‡§§‡•É‡§§‡•Ä‡§Ø";
  return pos;
}

async function loadResult(program){
  step4.classList.remove("hidden");
  resultBox.innerHTML="‡§®‡§ø‡§ï‡§æ‡§≤ ‡§≤‡•ã‡§° ‡§π‡•ã‡§§ ‡§Ü‡§π‡•á...";
  try{
    const res=await fetch(`${API}?action=result&main=${mainType}&type=${partType}&program=${encodeURIComponent(program)}`);
    const data=await res.json();
    if(!data || data.length===0){
      resultBox.innerHTML="<div class='error'>‡§®‡§ø‡§ï‡§æ‡§≤ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§æ‡§π‡•Ä</div>";
      return;
    }
    resultBox.innerHTML="";
    data.forEach(r=>{
      resultBox.innerHTML+=`
        <div class="result-card">
          <div class="rank">${medal(r.position)}</div>
          <div>${(r.name||"").split("/").join("<br>")}</div>
          <div class="office">${r.office||""}</div>
        </div>`;
    });
    showCelebration();
  }catch{
    resultBox.innerHTML="<div class='error'>‡§®‡§ø‡§ï‡§æ‡§≤ ‡§Æ‡§ø‡§≥‡§µ‡§§‡§æ‡§®‡§æ ‡§Ö‡§°‡§ö‡§£ ‡§Ü‡§≤‡•Ä</div>";
  }
}

function createConfetti(container, count, animation){
  container.innerHTML="";
  for(let i=0;i<count;i++){
    const c=document.createElement("span");
    c.className="confetti";
    c.style.left=Math.random()*100+"%";
    c.style.bottom="0";
    c.style.animationName=animation;
    c.style.animationDuration=(2.5+Math.random()*1.5)+"s";
c.style.transform = `rotate(${Math.random()*360}deg)`;
    container.appendChild(c);
  }
}

function showCelebration(){
  if(celebrating) return;
  celebrating=true;

  celebration.classList.remove("hidden");

  createConfetti(leftBurst,30,"blastLeft");
  createConfetti(rightBurst,30,"blastRight");
  createConfetti(topBurst,25,"blastTop");

  setTimeout(()=>{
    celebration.classList.add("hidden");
    celebrating=false;
  },3500);
}

</script>

</body>
</html>
