<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>Admin тАУ рд╡реЗрд│рд╛рдкрддреНрд░рдХ рднрд░рд╛</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:"Mukta",sans-serif;
  background:#f1f5f9;
  padding:20px;
}

.container{
  max-width:700px;
  margin:auto;
  background:#fff;
  padding:30px;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,0.15);
}

h2{
  text-align:center;
  color:#1e40af;
}

select,input{
  width:100%;
  padding:12px;
  margin-top:12px;
  border-radius:10px;
  border:1.5px solid #cbd5e1;
  font-size:15px;
}

button{
  margin-top:18px;
  width:100%;
  padding:12px;
  border:none;
  border-radius:10px;
  background:#16a34a;
  color:#fff;
  font-weight:700;
  font-size:16px;
  cursor:pointer;
}

.msg{
  margin-top:14px;
  font-weight:700;
  text-align:center;
}
</style>
</head>

<body>

<div class="container">
  <h2>ЁЯЧУя╕П Admin тАУ рд╡реЗрд│рд╛рдкрддреНрд░рдХ рдиреЛрдВрдж</h2>

  <select id="main">
    <option value="">рдХрд╛рд░реНрдпрдХреНрд░рдо рдкреНрд░рдХрд╛рд░</option>
    <option value="sports">рдХреНрд░реАрдбрд╛</option>
    <option value="cultural">рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ</option>
  </select>

  <select id="type">
    <option value="">рд╕рд╣рднрд╛рдЧ рдкреНрд░рдХрд╛рд░</option>
    <option value="individual">рд╡реИрдпрдХреНрддрд┐рдХ</option>
    <option value="duheri">рджреБрд╣реЗрд░реА</option>
    <option value="team">рд╕рд╛рдВрдШрд┐рдХ</option>
  </select>

  <input id="program" placeholder="рдЦреЗрд│ / рдХрд╛рд░реНрдпрдХреНрд░рдо рдирд╛рд╡">

  <input id="round" placeholder="рдлреЗрд░реА (рдЙрджрд╛. рдЙрдкрд╛рдВрддреНрдп рдлреЗрд░реА)">

  <input id="teamA" placeholder="Team A">

  <input id="teamB" placeholder="Team B">

  <input type="date" id="date">

  <input type="time" id="time">

  <input id="venue" placeholder="рдард┐рдХрд╛рдг">

  <button onclick="saveVelapatrak()">рд╡реЗрд│рд╛рдкрддреНрд░рдХ рдЬрддрди рдХрд░рд╛</button>

  <div class="msg" id="msg"></div>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycby4jBFfFt6GSBlQj_Cs22HrFA-0oXMZNQd0tBHA7h_FHYR2FLqR4UFaiCAfruYJQd9-NA/exec";

// ЁЯЫбя╕П adminToken localStorage рдордзреВрди
const adminToken = localStorage.getItem("adminToken");

if(!adminToken){
  alert("Admin login рдХрд░рд╛ рдЖрдзреА");
  window.location.href = "admin-login.html";
}

async function saveVelapatrak(){

  const msg = document.getElementById("msg");
  msg.innerHTML = "Saving...";

  const main   = document.getElementById("main").value;
  const type   = document.getElementById("type").value;
  const program= document.getElementById("program").value.trim();
  const round  = document.getElementById("round").value.trim();
  const teamA  = document.getElementById("teamA").value.trim();
  const teamB  = document.getElementById("teamB").value.trim();
  const date   = document.getElementById("date").value;
  const time   = document.getElementById("time").value;
  const venue  = document.getElementById("venue").value.trim();

  if(!main || !type || !program || !round || !teamA || !teamB || !date || !time || !venue){
    msg.innerHTML = "рд╕рд░реНрд╡ рдорд╛рд╣рд┐рддреА рднрд░рд╛";
    return;
  }

  try{
    const res = await fetch(
      `${API}?action=addVelapatrak`+
      `&adminToken=${adminToken}`+
      `&main=${main}`+
      `&type=${type}`+
      `&program=${encodeURIComponent(program)}`+
      `&round=${encodeURIComponent(round)}`+
      `&teamA=${encodeURIComponent(teamA)}`+
      `&teamB=${encodeURIComponent(teamB)}`+
      `&date=${date}`+
      `&time=${time}`+
      `&venue=${encodeURIComponent(venue)}`
    );

    const data = await res.json();

    if(data.ok){
      msg.style.color="green";
      msg.innerHTML = "тЬЕ рд╡реЗрд│рд╛рдкрддреНрд░рдХ рдпрд╢рд╕реНрд╡реАрд░реАрддреНрдпрд╛ рдЬрддрди рдЭрд╛рд▓реЗ";

      document.querySelectorAll("input").forEach(i=>i.value="");
    }else{
      msg.style.color="red";
      msg.innerHTML = "Unauthorized / Error";
    }

  }catch(e){
    msg.style.color="red";
    msg.innerHTML = "Server error";
  }
}
</script>

</body>
</html>
