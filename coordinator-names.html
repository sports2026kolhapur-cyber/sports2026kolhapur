<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä ‡§®‡•ã‡§Ç‡§¶</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:"Mukta",sans-serif;
  background:#f1f5f9;
  padding:20px;
}

.card{
  max-width:720px;
  margin:auto;
  background:#fff;
  padding:24px;
  border-radius:14px;
  box-shadow:0 10px 25px rgba(0,0,0,0.2);
}

h2{text-align:center;margin-bottom:18px;}

input, select{
  width:100%;
  padding:10px;
  margin-top:10px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:15px;
}

button{
  margin-top:14px;
  padding:12px;
  width:100%;
  border:none;
  border-radius:8px;
  background:#16a34a;
  color:#fff;
  font-weight:700;
  cursor:pointer;
}

table{
  width:100%;
  margin-top:22px;
  border-collapse:collapse;
  font-size:14px;
}

th,td{
  border:1px solid #ddd;
  padding:8px;
  text-align:center;
}

th{
  background:#1e40af;
  color:#fff;
}
</style>
</head>

<body>

<div class="card">
  <h2>‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§±‡•ç‡§Ø‡§æ‡§Ç‡§ö‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§≠‡§∞‡§æ</h2>

  <select id="type">
    <option value="">‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§®‡§ø‡§µ‡§°‡§æ</option>
    <option>‡§ï‡•ç‡§∞‡•Ä‡§°‡§æ ‡§∏‡•ç‡§™‡§∞‡•ç‡§ß‡§æ</option>
    <option>‡§∏‡§æ‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ</option>
  </select>

  <input type="text" id="event" placeholder="‡§ñ‡•á‡§≥ / ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡§æ‡§ö‡•á ‡§®‡§æ‡§µ">
  <input type="text" id="name" placeholder="‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§±‡•ç‡§Ø‡§æ‡§ö‡•á ‡§®‡§æ‡§µ">
  <input type="text" id="post" placeholder="‡§™‡§¶‡§®‡§æ‡§Æ">
  <input type="number" id="mobile" placeholder="‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡•ç‡§∞‡§Æ‡§æ‡§Ç‡§ï">

  <button onclick="addEntry()">‡§®‡•ã‡§Ç‡§¶ ‡§ú‡•ã‡§°‡§æ</button>

  <table id="dataTable">
    <thead>
      <tr>
        <th>‡§™‡•ç‡§∞‡§ï‡§æ‡§∞</th>
        <th>‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ</th>
        <th>‡§®‡§æ‡§µ</th>
        <th>‡§™‡§¶‡§®‡§æ‡§Æ</th>
        <th>‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
// üîê login check
if(sessionStorage.getItem("coordAuth") !== "1"){
  location.href="coordinator-login.html";
}

const API_URL = "https://script.google.com/macros/s/AKfycby4jBFfFt6GSBlQj_Cs22HrFA-0oXMZNQd0tBHA7h_FHYR2FLqR4UFaiCAfruYJQd9-NA/exec";

// table render helper
function addRow(d){
  const tbody = document.querySelector("#dataTable tbody");
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td>${d.type}</td>
    <td>${d.event}</td>
    <td>${d.name}</td>
    <td>${d.post}</td>
    <td>${d.mobile}</td>
  `;
  tbody.prepend(tr); // latest on top
}

async function addEntry(){

  const entry = {
    action: "addCoordinator",
    type: type.value.trim(),
    event: event.value.trim(),
    name: name.value.trim(),
    post: post.value.trim(),
    mobile: mobile.value.trim(),
    by: "Coordinator Admin"
  };

  if(!entry.type || !entry.event || !entry.name){
    alert("‡§∏‡§∞‡•ç‡§µ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§≠‡§∞‡§æ");
    return;
  }

  try{
    const res = await fetch(API_URL,{
      method:"POST",
      body: JSON.stringify(entry)
    });

    const d = await res.json();

    if(d.ok){
      alert("‡§®‡•ã‡§Ç‡§¶ ‡§Ø‡§∂‡§∏‡•ç‡§µ‡•Ä ‡§ù‡§æ‡§≤‡•Ä ‚úÖ");

      addRow(entry); // table ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§≤‡§ó‡•á‡§ö ‡§¶‡§æ‡§ñ‡§µ

      type.value="";
      event.value="";
      name.value="";
      post.value="";
      mobile.value="";
    }else{
      alert("Server error");
    }

  }catch(e){
    alert("Connection error");
  }
}
</script>

</body>
</html>
