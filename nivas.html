<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>рдирд┐рд╡рд╛рд╕ рд╡реНрдпрд╡рд╕реНрдерд╛</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#f1f5f9;
  font-family:"Noto Sans Devanagari","Mukta",sans-serif;
  padding:16px;
}
.card{
  max-width:420px;
  margin:auto;
  background:#fff;
  padding:24px;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,0.15);
}
h1{text-align:center;color:#1e40af;}

input,button{
  width:100%;
  padding:12px;
  margin-top:14px;
  border-radius:10px;
  font-size:16px;
}
input{
  border:1.5px solid #cbd5e1;
}
button{
  background:#1e40af;
  color:#fff;
  border:none;
  font-weight:700;
  cursor:pointer;
}
button:disabled{
  opacity:0.6;
  cursor:not-allowed;
}

/* Loader */
.loader{
  display:none;
  margin-top:18px;
  text-align:center;
  font-weight:700;
  color:#475569;
}
.loader span{
  display:inline-block;
  animation:blink 1.4s infinite both;
}
.loader span:nth-child(2){animation-delay:.2s;}
.loader span:nth-child(3){animation-delay:.4s;}

@keyframes blink{
  0%{opacity:.2;}
  20%{opacity:1;}
  100%{opacity:.2;}
}

/* Info */
.info{
  margin-top:22px;
  display:none;
  animation:fadeIn .3s ease;
}
@keyframes fadeIn{
  from{opacity:0;transform:translateY(6px);}
  to{opacity:1;transform:none;}
}
.info p{
  margin:8px 0;
  font-size:15px;
}

/* Error box */
.error{
  display:none;
  margin-top:20px;
  padding:14px;
  border-radius:12px;
  background:#fee2e2;
  color:#7f1d1d;
  font-weight:700;
  text-align:center;
}

/* Contact */
.contact{
  margin-top:16px;
  padding:12px;
  border-radius:12px;
  background:#f1f5f9;
  font-size:14px;
  text-align:center;
}
.contact a{
  color:#1d4ed8;
  font-weight:800;
  text-decoration:none;
}

/* Map */
a.map{
  display:block;
  margin-top:14px;
  color:#1d4ed8;
  font-weight:800;
  text-align:center;
  text-decoration:none;
}
</style>
</head>

<body>

<div class="card">
  <h1>ЁЯПи рдирд┐рд╡рд╛рд╕ рд╡реНрдпрд╡рд╕реНрдерд╛ <span style="font-size:0.85em;">рд╡ ЁЯПЕрд╕рд╣рднрд╛рдЧ рдорд╛рд╣рд┐рддреА</span></h1>

  <input id="mobile" placeholder="рдиреЛрдВрджрдгреА рдХреЗрд▓реЗрд▓рд╛ рдореЛрдмрд╛рдИрд▓ рдирдВрдмрд░" maxlength="10">
  <button id="btn" onclick="check()">рдорд╛рд╣рд┐рддреА рдкрд╛рд╣рд╛</button>

  <!-- Loader -->
  <div id="loader" class="loader">
    рдорд╛рд╣рд┐рддреА рд╢реЛрдзрдд рдЖрд╣реЗ<span>.</span><span>.</span><span>.</span>
  </div>

  <!-- Error -->
  <div id="error" class="error">
    <div id="errorMsg">тЭМ рдирд┐рд╡рд╛рд╕ рдорд╛рд╣рд┐рддреА рдЙрдкрд▓рдмреНрдз рдирд╛рд╣реА</div>

    <div class="contact">
      <div><b>рд╕рдВрдкрд░реНрдХ тАУ рдЖрдпреЛрдЬрдХ</b></div>
      <div style="margin-top:8px;">
        ЁЯСд рд╢реНрд░реАрдорддреА. рдПрд╕. рдмреА. рдирд░рдХреЗ. (рд╕рд╣рд╛. рдЕрднрд┐рдпрдВрддрд╛, рд╢реНрд░реЗ-реи) <br>
        ЁЯУЮ <a href="tel:9096620850">9096620850</a>
      </div>
      <div style="margin-top:10px;">
        ЁЯСд рд╢реНрд░реА. рдкреНрд░рддрд┐рдХ рдЖрдЧрд╡рдгреЗ (рд╕рд╣рд╛. рдЕрднрд┐рдпрдВрддрд╛, рд╢реНрд░реЗ-реи) <br>
        ЁЯУЮ <a href="tel:7249247831">7249247831</a>
      </div>
    </div>
  </div>

  <!-- Info -->
  <div id="info" class="info">
    <p><b>рдирд╛рд╡:</b> <span id="name"></span></p>
    <p><b>рдХрд╛рд░реНрдпрд╛рд▓рдп:</b> <span id="office"></span></p>
    <p><b>рдирд┐рд╡рд╛рд╕:</b> <span id="stay"></span></p>
    <p><b>рдЦреЛрд▓реА / рдмреНрд▓реЙрдХ:</b> <span id="room"></span></p>
    <a id="map" class="map" target="_blank">ЁЯУН Google Map рдЙрдШрдбрд╛</a>
  </div>

  <!-- Participation Info -->
  <div id="participation" class="info" style="display:none;">
    <h3 style="margin-top:18px;color:#1e40af;">ЁЯПЕ рд╕рд╣рднрд╛рдЧ рдорд╛рд╣рд┐рддреА</h3>
    <div id="sportsBox" style="margin-top:10px;"></div>
    <div id="culturalBox" style="margin-top:14px;"></div>
  </div>

</div> <!-- тЬЕ card close -->
  
<script>
const API="https://script.google.com/macros/s/AKfycby4jBFfFt6GSBlQj_Cs22HrFA-0oXMZNQd0tBHA7h_FHYR2FLqR4UFaiCAfruYJQd9-NA/exec";

/* ЁЯФЧ ELEMENT REFERENCES (MUST) */
const mobile   = document.getElementById("mobile");
const btn      = document.getElementById("btn");
const loader   = document.getElementById("loader");

const info     = document.getElementById("info");
const error    = document.getElementById("error");
const errorMsg = document.getElementById("errorMsg");

const name     = document.getElementById("name");
const office   = document.getElementById("office");
const stay     = document.getElementById("stay");
const room     = document.getElementById("room");
const map      = document.getElementById("map");
const participation = document.getElementById("participation");
const sportsBox = document.getElementById("sportsBox");
const culturalBox = document.getElementById("culturalBox");

async function check(){
  const mob = mobile.value.trim();
info.style.display = "none";
participation.style.display = "none";
error.style.display = "none";

  if(!/^\d{10}$/.test(mob)){
    errorMsg.textContent="тЭМ рдХреГрдкрдпрд╛ 10 рдЕрдВрдХреА рдореЛрдмрд╛рдИрд▓ рдирдВрдмрд░ рдЯрд╛рдХрд╛";
    error.style.display="block";
    return;
  }

  btn.disabled=true;
  loader.style.display="block";

  try{
    const res = await fetch(`${API}?action=nivas&mobile=${mob}`);
    const d = await res.json();

    loader.style.display="none";
    btn.disabled=false;

    if(!d.ok){
  participation.style.display = "none";
  errorMsg.textContent="тЭМ рдирд┐рд╡рд╛рд╕ рдорд╛рд╣рд┐рддреА рдЙрдкрд▓рдмреНрдз рдирд╛рд╣реА";
  error.style.display="block";
  return;
}
participation.style.display = "block";

// ---------- SPORTS ----------
if (d.sports && d.sports.length > 0) {
  sportsBox.innerHTML =
    "<b>ЁЯПП рдХреНрд░реАрдбрд╛ рд╕рд╣рднрд╛рдЧ:</b><ul>" +
    d.sports
      .map(s => `<li>${s.program} (${s.type})</li>`)
      .join("") +
    "</ul>";
} else {
  sportsBox.innerHTML = "<b>ЁЯПП рдХреНрд░реАрдбрд╛ рд╕рд╣рднрд╛рдЧ:</b> рдирд╛рд╣реА";
}

// ---------- CULTURAL ----------
if (d.cultural && d.cultural.length > 0) {
  culturalBox.innerHTML =
    "<b>ЁЯОн рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рд╕рд╣рднрд╛рдЧ:</b><ul>" +
    d.cultural
      .map(c => `<li>${c.program} (${c.type})</li>`)
      .join("") +
    "</ul>";
} else {
  culturalBox.innerHTML = "<b>ЁЯОн рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рд╕рд╣рднрд╛рдЧ:</b> рдирд╛рд╣реА";
}
    info.style.display="block";
    name.textContent = d.name || "-";
    office.textContent = d.office || "-";
    stay.textContent = d.stay || "-";
    room.textContent = d.room || "-";

    if(d.map){
      map.href=d.map;
      map.style.display="block";
    }else{
      map.style.display="none";
    }

  }catch(e){
    loader.style.display="none";
    btn.disabled=false;
    errorMsg.textContent="тЭМ рд╕рд░реНрд╡реНрд╣рд░рд╢реА рд╕рдВрдкрд░реНрдХ рд╣реЛрдд рдирд╛рд╣реА";
    error.style.display="block";
  }
}
</script>

</body>
</html>
